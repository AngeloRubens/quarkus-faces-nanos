<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:ui="jakarta.faces.facelets">

    <h:head>
        <title>System Dashboard</title>

        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
                background: #0a0e27;
                color: #fff;
                overflow-x: hidden;
            }

            .dashboard {
                max-width: 1600px;
                margin: 0 auto;
                padding: 20px;
            }

            .header {
                text-align: center;
                padding: 40px 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                border-radius: 20px;
                margin-bottom: 30px;
                box-shadow: 0 10px 40px rgba(102, 126, 234, 0.3);
                animation: slideDown 0.6s ease-out;
            }

            @keyframes slideDown {
                from {
                    opacity: 0;
                    transform: translateY(-30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .header h1 {
                font-size: 3em;
                font-weight: 700;
                margin-bottom: 10px;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            }

            .header .subtitle {
                font-size: 1.2em;
                opacity: 0.9;
            }

            .stats-overview {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin-bottom: 30px;
            }

            .stat-card {
                background: linear-gradient(135deg, #1e2139 0%, #2a2f4f 100%);
                border-radius: 15px;
                padding: 25px;
                border: 1px solid rgba(102, 126, 234, 0.3);
                transition: all 0.3s ease;
                animation: fadeIn 0.6s ease-out;
                animation-fill-mode: both;
            }

            .stat-card:nth-child(1) { animation-delay: 0.1s; }
            .stat-card:nth-child(2) { animation-delay: 0.2s; }
            .stat-card:nth-child(3) { animation-delay: 0.3s; }
            .stat-card:nth-child(4) { animation-delay: 0.4s; }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .stat-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
                border-color: rgba(102, 126, 234, 0.6);
            }

            .stat-icon {
                font-size: 2.5em;
                margin-bottom: 15px;
                display: inline-block;
                animation: pulse 2s ease-in-out infinite;
            }

            @keyframes pulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.1); }
            }

            .stat-label {
                font-size: 0.9em;
                color: #8b92b8;
                margin-bottom: 10px;
                text-transform: uppercase;
                letter-spacing: 1px;
            }

            .stat-value {
                font-size: 2em;
                font-weight: 700;
                color: #667eea;
            }

            .section-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
                gap: 25px;
                margin-bottom: 30px;
            }

            .section {
                background: linear-gradient(135deg, #1e2139 0%, #2a2f4f 100%);
                border-radius: 15px;
                padding: 25px;
                border: 1px solid rgba(102, 126, 234, 0.3);
                transition: all 0.3s ease;
            }

            .section:hover {
                border-color: rgba(102, 126, 234, 0.6);
            }

            .section-header {
                display: flex;
                align-items: center;
                margin-bottom: 20px;
                padding-bottom: 15px;
                border-bottom: 2px solid rgba(102, 126, 234, 0.3);
            }

            .section-icon {
                font-size: 1.8em;
                margin-right: 15px;
            }

            .section-title {
                font-size: 1.4em;
                font-weight: 600;
            }

            .info-row {
                display: flex;
                justify-content: space-between;
                padding: 12px 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .info-row:last-child {
                border-bottom: none;
            }

            .info-label {
                color: #8b92b8;
                font-size: 0.95em;
            }

            .info-value {
                color: #fff;
                font-weight: 600;
                text-align: right;
            }

            .progress-bar {
                height: 30px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 15px;
                overflow: hidden;
                position: relative;
                margin-top: 15px;
            }

            .progress-fill {
                height: 100%;
                background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: 700;
                transition: width 1s ease;
                position: relative;
                overflow: hidden;
            }

            .progress-fill::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
                animation: shimmer 2s infinite;
            }

            @keyframes shimmer {
                0% { left: -100%; }
                100% { left: 100%; }
            }

            .metric-group {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 15px;
                margin-top: 15px;
            }

            .metric-box {
                background: rgba(102, 126, 234, 0.1);
                padding: 15px;
                border-radius: 10px;
                text-align: center;
                border: 1px solid rgba(102, 126, 234, 0.2);
            }

            .metric-box .label {
                font-size: 0.85em;
                color: #8b92b8;
                margin-bottom: 8px;
            }

            .metric-box .value {
                font-size: 1.3em;
                font-weight: 700;
                color: #667eea;
            }

            .gc-item {
                background: rgba(102, 126, 234, 0.05);
                padding: 15px;
                border-radius: 10px;
                margin-bottom: 15px;
                border-left: 4px solid #667eea;
            }

            .disk-item {
                background: rgba(102, 126, 234, 0.05);
                padding: 20px;
                border-radius: 10px;
                margin-bottom: 15px;
            }

            .refresh-button {
                margin-top: 30px;
                text-align: center;
            }

            .refresh-button button {
                padding: 15px 40px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                border: none;
                border-radius: 25px;
                font-size: 1.1em;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
            }

            .refresh-button button:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 30px rgba(102, 126, 234, 0.6);
            }

            .timestamp {
                text-align: center;
                margin-top: 30px;
                padding: 20px;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 15px;
                color: #8b92b8;
            }

            .status-indicator {
                display: inline-block;
                width: 12px;
                height: 12px;
                border-radius: 50%;
                background: #4ade80;
                margin-right: 8px;
                animation: blink 2s ease-in-out infinite;
            }

            @keyframes blink {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.4; }
            }

            @media (max-width: 768px) {
                .section-grid {
                    grid-template-columns: 1fr;
                }
                
                .header h1 {
                    font-size: 2em;
                }
            }
        </style>
    </h:head>

    <h:body>
        <f:view>
            <div class="dashboard">
                
                <!-- Header -->
                <div class="header">
                    <h1>üñ•Ô∏è System Dashboard</h1>
                    <div class="subtitle">
                        <span class="status-indicator"></span>
                        Real-time System Monitoring
                    </div>
                </div>

                <!-- Stats Overview -->
                <div class="stats-overview">
                    <div class="stat-card">
                        <div class="stat-icon">üíæ</div>
                        <div class="stat-label">Memory Usage</div>
                        <div class="stat-value">
                            <h:outputText value="#{sys.memoryUsagePercent}">
                                <f:convertNumber pattern="#0.0"/>
                            </h:outputText>%
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üîß</div>
                        <div class="stat-label">CPU Cores</div>
                        <div class="stat-value">#{sys.cpuCores}</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üßµ</div>
                        <div class="stat-label">Active Threads</div>
                        <div class="stat-value">#{sys.threadCount}</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">‚è±Ô∏è</div>
                        <div class="stat-label">Uptime</div>
                        <div class="stat-value" style="font-size: 1.3em;">#{sys.uptime}</div>
                    </div>
                </div>

                <!-- Main Grid -->
                <div class="section-grid">
                    
                    <!-- Memory Details -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-icon">üíæ</div>
                            <div class="section-title">Memory Analysis</div>
                        </div>

                        <div class="metric-group">
                            <div class="metric-box">
                                <div class="label">Max Heap</div>
                                <div class="value">
                                    <h:outputText value="#{sys.maxMemory / 1024 / 1024}">
                                        <f:convertNumber pattern="#,##0"/>
                                    </h:outputText> MB
                                </div>
                            </div>

                            <div class="metric-box">
                                <div class="label">Used</div>
                                <div class="value">
                                    <h:outputText value="#{sys.usedMemory / 1024 / 1024}">
                                        <f:convertNumber pattern="#,##0"/>
                                    </h:outputText> MB
                                </div>
                            </div>

                            <div class="metric-box">
                                <div class="label">Available</div>
                                <div class="value">
                                    <h:outputText value="#{sys.availableMemory / 1024 / 1024}">
                                        <f:convertNumber pattern="#,##0"/>
                                    </h:outputText> MB
                                </div>
                            </div>
                        </div>

                        <div class="progress-bar">
                            <div class="progress-fill" style="width: #{sys.memoryUsagePercent}%;">
                                <h:outputText value="#{sys.memoryUsagePercent}">
                                    <f:convertNumber pattern="#0.0"/>
                                </h:outputText>%
                            </div>
                        </div>
                    </div>

                    <!-- JVM Info -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-icon">‚òï</div>
                            <div class="section-title">Java Virtual Machine</div>
                        </div>

                        <div class="info-row">
                            <span class="info-label">Version</span>
                            <span class="info-value">#{sys.systemProperties['java.version']}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Vendor</span>
                            <span class="info-value">#{sys.systemProperties['java.vendor']}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">VM Name</span>
                            <span class="info-value">#{sys.systemProperties['java.vm.name']}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">VM Version</span>
                            <span class="info-value">#{sys.systemProperties['java.vm.version']}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Architecture</span>
                            <span class="info-value">#{sys.systemProperties['os.arch']}</span>
                        </div>
                    </div>

                    <!-- Thread Info -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-icon">üßµ</div>
                            <div class="section-title">Thread Management</div>
                        </div>

                        <div class="metric-group">
                            <div class="metric-box">
                                <div class="label">Current</div>
                                <div class="value">#{sys.threadCount}</div>
                            </div>

                            <div class="metric-box">
                                <div class="label">Peak</div>
                                <div class="value">#{sys.peakThreadCount}</div>
                            </div>

                            <div class="metric-box">
                                <div class="label">Total Started</div>
                                <div class="value">#{sys.totalStartedThreads}</div>
                            </div>
                        </div>
                    </div>

                    <!-- Server Info -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-icon">üåê</div>
                            <div class="section-title">Application Server</div>
                        </div>

                        <div class="info-row">
                            <span class="info-label">Server Info</span>
                            <span class="info-value">#{facesContext.externalContext.context.serverInfo}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Context Path</span>
                            <span class="info-value">#{facesContext.externalContext.requestContextPath}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Servlet Version</span>
                            <span class="info-value">#{facesContext.externalContext.context.majorVersion}.#{facesContext.externalContext.context.minorVersion}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Context Name</span>
                            <span class="info-value">#{facesContext.externalContext.context.servletContextName}</span>
                        </div>
                    </div>

                    <!-- Operating System -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-icon">üñ•Ô∏è</div>
                            <div class="section-title">Operating System</div>
                        </div>

                        <div class="info-row">
                            <span class="info-label">OS Name</span>
                            <span class="info-value">#{sys.systemProperties['os.name']}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">OS Version</span>
                            <span class="info-value">#{sys.systemProperties['os.version']}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Architecture</span>
                            <span class="info-value">#{sys.systemProperties['os.arch']}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">User Name</span>
                            <span class="info-value">#{sys.systemProperties['user.name']}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">User Home</span>
                            <span class="info-value">#{sys.systemProperties['user.home']}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Working Directory</span>
                            <span class="info-value">#{sys.systemProperties['user.dir']}</span>
                        </div>
                    </div>
                </div>

                <!-- Garbage Collector Section -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-icon">üóëÔ∏è</div>
                        <div class="section-title">Garbage Collector Statistics</div>
                    </div>

                    <ui:repeat value="#{sys.gcInfo}" var="gc">
                        <div class="gc-item">
                            <div class="info-row">
                                <span class="info-label">GC Name</span>
                                <span class="info-value">#{gc.name}</span>
                            </div>
                            <div class="metric-group">
                                <div class="metric-box">
                                    <div class="label">Collections</div>
                                    <div class="value">#{gc.collectionCount}</div>
                                </div>
                                <div class="metric-box">
                                    <div class="label">Time (ms)</div>
                                    <div class="value">
                                        <h:outputText value="#{gc.collectionTime}">
                                            <f:convertNumber pattern="#,##0"/>
                                        </h:outputText>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </ui:repeat>
                </div>

                <!-- Timestamp and Refresh -->
                <div class="timestamp">
                    Last updated: 
                    <h:outputText value="#{sys.now}">
                        <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" type="localDateTime"/>
                    </h:outputText>
                </div>

                <div class="refresh-button">
                    <h:form>
                        <h:commandButton value="üîÑ Refresh Dashboard"/>
                    </h:form>
                </div>

            </div>
        </f:view>
    </h:body>
</html>
